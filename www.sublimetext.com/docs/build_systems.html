<!DOCTYPE html>
<html>
<head>
    <title>Build Systems</title>
    <script type="text/javascript" src="docs.js@v=a39adbf106ab7bd08270f5a660845d18"></script>
    <link rel="stylesheet" type="text/css" href="docs.css@v=4100a55ba91b60ec302ae71a43d323ab.css">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=480, user-scalable=yes">
    <link rel="stylesheet" type="text/css" href="../sublime_v3.css@v=6dd3f0d56104da1d5a9bb3855a6e0b0d.css">
    <link rel="icon" href="../favicon.ico">
    <link rel="icon" size="64x64" href="../favicon.ico">
    <link rel="icon" sizes="192x192" href="https://www.sublimetext.com/images/icon.png">
    <link rel="apple-touch-icon-precomposed" sizes="192x192" href="https://www.sublimetext.com/images/icon.png">
    <script type="text/javascript">
    var plat = 'windows'
    if (/Mac OS X/.test(navigator.userAgent))
        plat = 'osx'
    else if (/Linux|FreeBSD/.test(navigator.userAgent))
        plat = 'linux'
    var arch = /WOW64|Win64|x86_64/.test(navigator.userAgent) ? '64' : '32'
    document.documentElement.className += ' plat_' + plat + ' arch_' + arch
    function byid(x)
    {
        return document.getElementById(x)
    }
    var scale = 1
    function res()
    {
        scale = window.devicePixelRatio >= 1.3 ? 2 : 1
        return scale == 2 ? '@2x' : ''
    }
    </script>
    <!--[if lt IE 9]>
    <script>
        var els = ['header', 'nav', 'section', 'main', 'article', 'aside', 'footer']
        for (var i = 0; i < els.length; ++i)
            document.createElement(els[i]);
    </script>
    <style>
        header, nav, section, main, article, aside, footer {
            display: block;
        }
    </style>
    <![endif]-->
</head>
<body class="docs">
    <header>
        <section>
            <a id="logo" href="https://www.sublimetext.com/">
                <img src="../images/logo.svg" alt="Sublime Text">
            </a>
            <nav>
                <a href="https://www.sublimetext.com/download">Download</a>
                <a href="https://www.sublimehq.com/store/text">Buy</a>
                <a href="https://www.sublimetext.com/support">Support</a>
                <span class="vr"></span>
                <a href="https://www.sublimetext.com/blog/">News</a>
                <a href="https://forum.sublimetext.com">Forum</a>
            </nav>
        </section>
    </header>
<main>
<section>
<h1>
<div class="background"></div>
<div class="placeholder"></div>
<span>
    <nav>
        <a href="index.html">Documentation</a>
        <a class="divider"></a>
        <a class="jump toc" href="build_systems.html#toc">TOC</a>
        <a class="jump top" href="build_systems.html#">TOP</a>
    </nav>
    Build Systems
</span>
<div class="versions">
    Ver<span class="expanded">sion</span>:<br>
</div>
</h1>
<div class="primary">

  <section id="build-systems"><p>Sublime Text provides <i>build systems</i> to allow users to run external programs.
Examples of common uses for build systems include: compiling, transpiling,
linting, and executing tests.</p>
<p>Build systems are specified via JSON and saved in a file with the
extension <span class="file">.sublime-build</span>. A new build system can be created by
the <span class="menu">Tools <img src="../images/right.svg" alt="▶"> Build System <img src="../images/right.svg" alt="▶"> New Build System…</span> menu item or the <code class="docutils literal notranslate"><span class="pre">Build:</span>
<span class="pre">New</span> <span class="pre">Build</span> <span class="pre">System</span></code> command palette entry.</p>
<p>Build systems have various ways they can associate themselves with files and
projects. Using this information, Sublime Text can intelligently display only
viable build systems to the user. The built-in <code class="docutils literal notranslate"><span class="pre">exec</span></code> target
provides common options to get up and running quickly. For more complex
requirements, build systems can target custom Sublime Text commands written in
Python.</p>
<ul class="simple">
<li><p><a class="reference internal" href="build_systems.html#basic-example">Basic Example</a></p></li>
<li><p><a class="reference internal" href="build_systems.html#usage">Usage</a></p></li>
<li><p><a class="reference internal" href="build_systems.html#options">Options</a></p></li>
<li><p><a class="reference internal" href="build_systems.html#exec-target-options">exec Target Options</a></p></li>
<li><p><a class="reference internal" href="build_systems.html#custom-options">Custom Options</a></p></li>
<li><p><a class="reference internal" href="build_systems.html#variables">Variables</a></p></li>
<li><p><a class="reference internal" href="build_systems.html#advanced-example">Advanced Example</a></p></li>
</ul>
<section id="basic-example"><h2>Basic Example<a class="headerlink" href="build_systems.html#basic-example" title="Permalink to this heading">🔗</a></h2>
<p>The following is a basic example of a build system. This build system will
execute the currently-open Python file.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;$file&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;selector&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;source.python&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;file_regex&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^\\s*File \&quot;(...*?)\&quot;, line ([0-9]*)&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="build_systems.html#usage">Usage</a> and <a class="reference internal" href="build_systems.html#options">Options</a> sections will discuss how to use and customize a
build system.</p>
</section><section id="usage"><h2>Usage<a class="headerlink" href="build_systems.html#usage" title="Permalink to this heading">🔗</a></h2>
<p>Build systems include the following functionality:</p>
<ul class="simple">
<li><p>Automatic selection of a build system based on file type</p></li>
<li><p>Remembering the last used build system</p></li>
<li><p>Navigation of build system results</p></li>
<li><p>Ability to cancel a build</p></li>
</ul>
<section id="running-a-build"><h3>Running a Build<a class="headerlink" href="build_systems.html#running-a-build" title="Permalink to this heading">🔗</a></h3>
<p>A build can be run by one of the following methods:</p>
<section class="wide"><table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 18%" />
<col style="width: 16%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p>Keyboard</p></th>
<th class="head"><p>Menu</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><i>Windows/Linux</i></p></td>
<td><p><i>Mac</i></p></td>
<td><p><i>All</i></p></td>
<td rowspan="2"><p><span class="menu">Tools <img src="../images/right.svg" alt="▶"> Build</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="keys"><b>Ctrl</b><i>+</i><b>B</b></span></p></td>
<td><p><span class="keys"><b>⌘</b><i>+</i><b>B</b></span></p></td>
<td><p><span class="keys"><b>F7</b></span></p></td>
</tr>
</tbody>
</table>
</section><p>Output will be shown in an output panel displayed at the bottom of the Sublime
Text window.</p>
</section><section id="selecting-a-build-system"><h3>Selecting a Build System<a class="headerlink" href="build_systems.html#selecting-a-build-system" title="Permalink to this heading">🔗</a></h3>
<p>By default, Sublime Text uses automatic selection of build systems. When a user
invokes a build, the current file’s syntax and filename will be used to pick
the appropriate build system.</p>
<p>If more than one build system matches the current file type, the user will be
prompted to pick the build system they wish to use. Once a build system has
been selected, Sublime Text will remember it until the user changes their
selection.</p>
<p>To manually choose a build system, use: <span class="menu">Tools <img src="../images/right.svg" alt="▶"> Build System</span></p>
<p>To change the build system, within the viable options, use one of the following
methods:</p>
<section class="wide"><table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 16%" />
<col style="width: 37%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Keyboard</p></th>
<th class="head"><p>Menu</p></th>
<th class="head"><p>Command Palette</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><i>Windows/Linux</i></p></td>
<td><p><i>Mac</i></p></td>
<td rowspan="2"><p><span class="menu">Tools <img src="../images/right.svg" alt="▶"> Build With…</span></p></td>
<td rowspan="2"><p><code class="docutils literal notranslate"><span class="pre">Build</span> <span class="pre">With:</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><span class="keys"><b>Ctrl</b><i>+</i><b>Shift</b><i>+</i><b>B</b></span></p></td>
<td><p><span class="keys"><b>⇧</b><i>+</i><b>⌘</b><i>+</i><b>B</b></span></p></td>
</tr>
</tbody>
</table>
</section></section><section id="navigating-results"><h3>Navigating Results<a class="headerlink" href="build_systems.html#navigating-results" title="Permalink to this heading">🔗</a></h3>
<p>Build systems allow navigation of files specified in the build output. Typically
this is used to jump to the location of errors. Navigation can be performed
via:</p>
<section class="wide"><table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 19%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Keyboard</p></th>
<th class="head"><p>Menu</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Next Result</p></td>
<td><p><span class="keys"><b>F4</b></span></p></td>
<td><p><span class="menu">Tools <img src="../images/right.svg" alt="▶"> Build Results <img src="../images/right.svg" alt="▶"> Next Result</span></p></td>
</tr>
<tr class="row-odd"><td><p>Previous Result</p></td>
<td><p><span class="keys"><b>Shift</b><i>+</i><b>F4</b></span></p></td>
<td><p><span class="menu">Tools <img src="../images/right.svg" alt="▶"> Build Results <img src="../images/right.svg" alt="▶"> Previous Result</span></p></td>
</tr>
</tbody>
</table>
</section></section><section id="cancelling-a-build"><h3>Cancelling a Build<a class="headerlink" href="build_systems.html#cancelling-a-build" title="Permalink to this heading">🔗</a></h3>
<p>An in-process build can be cancelled via:</p>
<section class="wide"><table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 17%" />
<col style="width: 37%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Keyboard</p></th>
<th class="head"><p>Menu</p></th>
<th class="head"><p>Command Palette</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><i>Windows/Linux</i></p></td>
<td><p><i>Mac</i></p></td>
<td rowspan="2"><p><span class="menu">Tools <img src="../images/right.svg" alt="▶"> Cancel Build</span></p></td>
<td rowspan="2"><p><code class="docutils literal notranslate"><span class="pre">Build:</span> <span class="pre">Cancel</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><span class="keys"><b>Ctrl</b><i>+</i><b>Break</b></span></p></td>
<td><p><span class="keys"><b>Ctrl</b><i>+</i><b>C</b></span></p></td>
</tr>
</tbody>
</table>
</section></section></section><section id="options"><h2>Options<a class="headerlink" href="build_systems.html#options" title="Permalink to this heading">🔗</a></h2>
<p>All build systems may use the following top-level keys in
the <span class="file">.sublime-build</span> file:</p>
<dl class="subl setting">
<dt class="sig sig-object subl" id="selector">
<span class="key"><span class="pre">&quot;selector&quot;</span></span> <span class="data-type"><span class="pre">string</span></span><a class="headerlink" href="build_systems.html#selector" title="Permalink to this definition">🔗</a></dt>
<dd><p>A <a class="reference internal" href="selectors.html"><span class="doc">selector</span></a> to match the syntax that this build system should
be enabled for.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;source.python&quot;</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="file_patterns">
<span class="key"><span class="pre">&quot;file_patterns&quot;</span></span> <span class="data-type"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">strings</span></span><a class="headerlink" href="build_systems.html#file_patterns" title="Permalink to this definition">🔗</a></dt>
<dd><p><a class="reference internal" href="file_patterns.html"><span class="doc">Patterns</span></a> of file names the build system should be enabled
for.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">[&quot;*.py&quot;]</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="keyfiles">
<span class="key"><span class="pre">&quot;keyfiles&quot;</span></span> <span class="data-type"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">strings</span></span><a class="headerlink" href="build_systems.html#keyfiles" title="Permalink to this definition">🔗</a></dt>
<dd><p>File names, if present in one of the opened folders, that will cause the
build system to be enabled.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">[&quot;Makefile&quot;]</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="variants">
<span class="key"><span class="pre">&quot;variants&quot;</span></span> <span class="data-type"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">objects</span></span><a class="headerlink" href="build_systems.html#variants" title="Permalink to this definition">🔗</a></dt>
<dd><p>Subsidiary build systems that will inherit the options from the top-level
build system. Each variant needs to specify a <code class="docutils literal notranslate"><span class="pre">&quot;name&quot;</span></code> key, and may
override or add options to the top-level build system.</p>
<p>Example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Debug Symbols&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;my_command&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-D&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;$file&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="cancel">
<span class="key"><span class="pre">&quot;cancel&quot;</span></span> <span class="data-type"><span class="pre">string,</span> <span class="pre">array</span> <span class="pre">of</span> <span class="pre">strings</span></span><a class="headerlink" href="build_systems.html#cancel" title="Permalink to this definition">🔗</a></dt>
<dd><p>A string command name, or an array of string options.</p>
<p>If a string is specified, the command specified will be used to cancel the
build.</p>
<p>If an array of strings, the primary <code class="docutils literal notranslate"><span class="pre">&quot;target&quot;</span></code> will be called, with these
options added on. This only needs to be specified when using a custom
<code class="docutils literal notranslate"><span class="pre">&quot;target&quot;</span></code>.</p>
<p>Examples: <code class="docutils literal notranslate"><span class="pre">&quot;cancel_my_build&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">&quot;kill&quot;:</span> <span class="pre">true</span> <span class="pre">}</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="target">
<span class="key"><span class="pre">&quot;target&quot;</span></span> <span class="data-type"><span class="pre">string</span></span><a class="headerlink" href="build_systems.html#target" title="Permalink to this definition">🔗</a></dt>
<dd><p>The command to run when the build system is invoked. The default value of
<code class="docutils literal notranslate"><span class="pre">exec</span></code> allows use of the additional options specified in <a class="reference internal" href="build_systems.html#exec-target-options">exec Target
Options</a>.</p>
<p>If a value other than <code class="docutils literal notranslate"><span class="pre">&quot;exec&quot;</span></code> is specified, none of the options in <a class="reference internal" href="build_systems.html#exec-target-options">exec
Target Options</a> will do anything.</p>
<p>See the <a class="reference internal" href="build_systems.html#advanced-example">Advanced Example</a> for a complete example.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;my_build&quot;</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="windows">
<span class="key"><span class="pre">&quot;windows&quot;</span></span> <span class="data-type"><span class="pre">object</span></span><a class="headerlink" href="build_systems.html#windows" title="Permalink to this definition">🔗</a></dt>
<dd><p>Options to use when the build system is being executed on a Windows
machine.</p>
<p>Example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;my_command.exe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;/D&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;$file&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="osx">
<span class="key"><span class="pre">&quot;osx&quot;</span></span> <span class="data-type"><span class="pre">object</span></span><a class="headerlink" href="build_systems.html#osx" title="Permalink to this definition">🔗</a></dt>
<dd><p>Options to use when the build system is being executed on a Mac machine.</p>
<p>Example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/Applications/MyProgram.app/Contents/MacOS/my_command&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-d&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;$file&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="linux">
<span class="key"><span class="pre">&quot;linux&quot;</span></span> <span class="data-type"><span class="pre">object</span></span><a class="headerlink" href="build_systems.html#linux" title="Permalink to this definition">🔗</a></dt>
<dd><p>Options to use when the build system is being executed on a Linux machine.</p>
<p>Example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/usr/local/bin/my_command&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-d&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;$file&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</section><section id="exec-target-options"><h2><code class="docutils literal notranslate"><span class="pre">exec</span></code> Target Options<a class="headerlink" href="build_systems.html#exec-target-options" title="Permalink to this heading">🔗</a></h2>
<p>The default <code class="docutils literal notranslate"><span class="pre">target</span></code> of <code class="docutils literal notranslate"><span class="pre">exec</span></code> is used by the majority of build systems. It
provides the following options to control what program to execute, and how to
display the results.</p>
<dl class="subl setting">
<dt class="sig sig-object subl" id="cmd">
<span class="key"><span class="pre">&quot;cmd&quot;</span></span> <span class="data-type"><span class="pre">array</span> <span class="pre">of</span> <span class="pre">strings</span></span><a class="headerlink" href="build_systems.html#cmd" title="Permalink to this definition">🔗</a></dt>
<dd><p>The executable to run, plus any arguments to pass to it. Shell constructs
such as piping and redirection are not supported – see <a class="reference internal" href="build_systems.html#shell_cmd" title="&quot;shell_cmd&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;shell_cmd&quot;</span></code></a>.</p>
<p>May use <a class="reference internal" href="build_systems.html#variables">variables</a>.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">[&quot;my_command&quot;,</span> <span class="pre">&quot;-d&quot;,</span> <span class="pre">&quot;$file&quot;]</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="shell_cmd">
<span class="key"><span class="pre">&quot;shell_cmd&quot;</span></span> <span class="data-type"><span class="pre">string</span></span><a class="headerlink" href="build_systems.html#shell_cmd" title="Permalink to this definition">🔗</a></dt>
<dd><p>A shell command to execute. Unlike the <a class="reference internal" href="build_systems.html#cmd" title="&quot;cmd&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;cmd&quot;</span></code></a> option, this does allow
piping and redirection. Will use <code class="docutils literal notranslate"><span class="pre">bash</span></code> on Mac and Linux machine, and
<code class="docutils literal notranslate"><span class="pre">cmd.exe</span></code> on Windows.</p>
<p>This takes precedence over <a class="reference internal" href="build_systems.html#cmd" title="&quot;cmd&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;cmd&quot;</span></code></a>. If you want to override the
<a class="reference internal" href="build_systems.html#shell_cmd" title="&quot;shell_cmd&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;shell_cmd&quot;</span></code></a> in a build variant with a <a class="reference internal" href="build_systems.html#cmd" title="&quot;cmd&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;cmd&quot;</span></code></a> then also set the
<a class="reference internal" href="build_systems.html#shell_cmd" title="&quot;shell_cmd&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;shell_cmd&quot;</span></code></a> to <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>May use <a class="reference internal" href="build_systems.html#variables">variables</a>.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;my_command</span> <span class="pre">\&quot;$file\&quot;</span> <span class="pre">|</span> <span class="pre">other_command&quot;</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="working_dir">
<span class="key"><span class="pre">&quot;working_dir&quot;</span></span> <span class="data-type"><span class="pre">string</span></span><a class="headerlink" href="build_systems.html#working_dir" title="Permalink to this definition">🔗</a></dt>
<dd><p>The directory to execute the <a class="reference internal" href="build_systems.html#cmd" title="&quot;cmd&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;cmd&quot;</span></code></a> or <a class="reference internal" href="build_systems.html#shell_cmd" title="&quot;shell_cmd&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;shell_cmd&quot;</span></code></a> within.</p>
<p>May use <a class="reference internal" href="build_systems.html#variables">variables</a>.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;$file_path&quot;</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="file_regex">
<span class="key"><span class="pre">&quot;file_regex&quot;</span></span> <span class="data-type"><span class="pre">string</span></span><a class="headerlink" href="build_systems.html#file_regex" title="Permalink to this definition">🔗</a></dt>
<dd><p>A regular expression to run on the build output to match file information.
The matched file information is used to enable result navigation. The regex
should capture 2, 3 or 4 groups.</p>
<p>The capture groups should be:</p>
<ol class="arabic simple">
<li><p>filename</p></li>
<li><p>line number</p></li>
<li><p>column number</p></li>
<li><p>message</p></li>
</ol>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;^\s*(\\S[^:]*)\\((\\d+):(\\d+)\\):</span> <span class="pre">([^\\n]+)&quot;</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="line_regex">
<span class="key"><span class="pre">&quot;line_regex&quot;</span></span> <span class="data-type"><span class="pre">string</span></span><a class="headerlink" href="build_systems.html#line_regex" title="Permalink to this definition">🔗</a></dt>
<dd><p>A regular expression to run on the build output to match line information.
The matched file information is used to enable result navigation. The regex
should capture 1, 2 or 3 groups.</p>
<p>The groups should capture:</p>
<ol class="arabic simple">
<li><p>line number</p></li>
<li><p>column number</p></li>
<li><p>error message</p></li>
</ol>
<p>This regular expression is only necessary when some results contain strictly
a line number, line and column numbers, or line and column numbers with a
message. When such a match is made, the <a class="reference internal" href="build_systems.html#file_regex" title="&quot;file_regex&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;file_regex&quot;</span></code></a> option will be used
to search backwards to find the appropriate file name.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;^\s*line</span> <span class="pre">(\\d+)</span> <span class="pre">col</span> <span class="pre">(\\d+):</span> <span class="pre">([^\\n]+)&quot;</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="encoding">
<span class="key"><span class="pre">&quot;encoding&quot;</span></span> <span class="data-type"><span class="pre">string</span></span><a class="headerlink" href="build_systems.html#encoding" title="Permalink to this definition">🔗</a></dt>
<dd><p>The encoding of the build system output. Uses <a class="reference external" href="https://docs.python.org/3.3/library/codecs.html#id3">Python codec names</a>. Defaults to
<code class="docutils literal notranslate"><span class="pre">&quot;utf-8&quot;</span></code>.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;iso-8859-1&quot;</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="env">
<span class="key"><span class="pre">&quot;env&quot;</span></span> <span class="data-type"><span class="pre">object</span></span><a class="headerlink" href="build_systems.html#env" title="Permalink to this definition">🔗</a></dt>
<dd><p>Environment variable values to use when running the <a class="reference internal" href="build_systems.html#cmd" title="&quot;cmd&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;cmd&quot;</span></code></a> or
<a class="reference internal" href="build_systems.html#shell_cmd" title="&quot;shell_cmd&quot;"><code class="docutils literal notranslate"><span class="pre">&quot;shell_cmd&quot;</span></code></a>.</p>
<p>Example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;PYTHONIOENCODING&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;utf-8&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="quiet">
<span class="key"><span class="pre">&quot;quiet&quot;</span></span> <span class="data-type"><span class="pre">boolean</span></span><a class="headerlink" href="build_systems.html#quiet" title="Permalink to this definition">🔗</a></dt>
<dd><p>Reduces the amount of output about the build system invocation.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="word_wrap">
<span class="key"><span class="pre">&quot;word_wrap&quot;</span></span> <span class="data-type"><span class="pre">boolean</span></span><a class="headerlink" href="build_systems.html#word_wrap" title="Permalink to this definition">🔗</a></dt>
<dd><p>Turns on word wrapping in the build system output panel.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</dd></dl>

<dl class="subl setting">
<dt class="sig sig-object subl" id="syntax">
<span class="key"><span class="pre">&quot;syntax&quot;</span></span> <span class="data-type"><span class="pre">string</span></span><a class="headerlink" href="build_systems.html#syntax" title="Permalink to this definition">🔗</a></dt>
<dd><p>The syntax file to use to highlight the build system output panel.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;Packages/JavaScript/JSON.sublime-syntax&quot;</span></code></p>
</dd></dl>

</section><section id="custom-options"><h2>Custom Options<a class="headerlink" href="build_systems.html#custom-options" title="Permalink to this heading">🔗</a></h2>
<p>When implementing a command to act as a build system target, the command’s
keyword arguments are available via options in the <span class="file">.sublime-build</span> file.
However, certain parameter names will not work since they conflict with
built-in build system functionality.</p>
<p>The following names will not be passed as arguments to commands. This also
applies to other situations, such as options specified in the <code class="docutils literal notranslate"><span class="pre">&quot;cancel&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;linux&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;osx&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;windows&quot;</span></code> options.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;cancel&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;file_patterns&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;keyfile&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;keyfiles&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;linux&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;osx&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;save_untitled_files&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;selector&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;target&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;variants&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;windows&quot;</span></code></p></li>
</ul>
</section><section id="variables"><h2>Variables<a class="headerlink" href="build_systems.html#variables" title="Permalink to this heading">🔗</a></h2>
<p>The following variables will be expanded within any string specified in the
<code class="docutils literal notranslate"><span class="pre">&quot;cmd&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;shell_cmd&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;working_dir&quot;</span></code> options.</p>
<p>If a literal <code class="docutils literal notranslate"><span class="pre">$</span></code> needs to be specified in one of these options, it must be
escaped with a <code class="docutils literal notranslate"><span class="pre">\</span></code>. Since JSON uses backslashes for escaping also, <code class="docutils literal notranslate"><span class="pre">$</span></code> will
need to be written as <code class="docutils literal notranslate"><span class="pre">\\$</span></code>.</p>
<p>Please note that this substitution will occur for any &lt;span
class=”key”&gt;”target”&lt;/span&gt;. If a custom target is used, it may implement
variable expansion for additional options by using
<code class="docutils literal notranslate"><span class="pre">sublime.expand_variables()</span></code> with the result from
<code class="docutils literal notranslate"><span class="pre">self.window.extract_variables()</span></code>. &lt;/p&gt;</p>
<section class="wide"><table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$packages</span></code></p></td>
<td><p>The path to the <span class="file">Packages/</span> folder.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$platform</span></code></p></td>
<td><p>The platform Sublime Text is running on: <code class="docutils literal notranslate"><span class="pre">&quot;windows&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;osx&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;linux&quot;</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$file</span></code></p></td>
<td><p>The full path, including folder, to the file in the active view.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$file_path</span></code></p></td>
<td><p>The path to the folder that contains the file in the active view.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$file_name</span></code></p></td>
<td><p>The file name (sans folder path) of the file in the active view.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$file_base_name</span></code></p></td>
<td><p>The file name, exluding the extension, of the file in the active view.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$file_extension</span></code></p></td>
<td><p>The extension of the file name of the file in the active view.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$folder</span></code></p></td>
<td><p>The full path to the first folder listed in the side bar.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$project</span></code></p></td>
<td><p>The full path to the current project file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$project_path</span></code></p></td>
<td><p>The path to the folder containing the current project file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$project_name</span></code></p></td>
<td><p>The file name (sans folder path) of the current project file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$project_base_name</span></code></p></td>
<td><p>The file name, excluding the extension, of the current project file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$project_extension</span></code></p></td>
<td><p>The extension of the current project file.</p></td>
</tr>
</tbody>
</table>
</section></section><section id="advanced-example"><h2>Advanced Example<a class="headerlink" href="build_systems.html#advanced-example" title="Permalink to this heading">🔗</a></h2>
<p>The following example shows a custom <code class="docutils literal notranslate"><span class="pre">target</span></code> command, with the ability to
cancel a build and navigate results.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">target</span></code> for a build system should be a <a class="reference internal" href="api_reference.html#sublime_plugin.WindowCommand" title="sublime_plugin.WindowCommand"><code class="xref any py py-class docutils literal notranslate"><span class="pre">sublime_plugin.WindowCommand</span></code></a>. This
will provide the instance variable of <code class="docutils literal notranslate"><span class="pre">self.window</span></code> to allow interaction with
the current project, window and active view.</p>
<p><i>Please note that the following example is somewhat simplistic in its
implementation, and it won’t handle many common edge cases.</i></p>
<p>The following Python can be saved to a file
named <span class="file">Package/User/my_example_build.py</span>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sublime</span>
<span class="kn">import</span> <span class="nn">sublime_plugin</span>

<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">os</span>


<span class="k">class</span> <span class="nc">MyExampleBuildCommand</span><span class="p">(</span><span class="n">sublime_plugin</span><span class="o">.</span><span class="n">WindowCommand</span><span class="p">):</span>

    <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span>
    <span class="n">killed</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">proc</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">panel</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">panel_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">is_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lint</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">integration</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">kill</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># The Cancel build option should only be available</span>
        <span class="c1"># when the process is still running</span>
        <span class="k">if</span> <span class="n">kill</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">proc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">proc</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lint</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">integration</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">kill</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">kill</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">proc</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">killed</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">proc</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="nb">vars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">extract_variables</span><span class="p">()</span>
        <span class="n">working_dir</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">[</span><span class="s1">&#39;file_path&#39;</span><span class="p">]</span>

        <span class="c1"># A lock is used to ensure only one thread is</span>
        <span class="c1"># touching the output panel at a time</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">panel_lock</span><span class="p">:</span>
            <span class="c1"># Creating the panel implicitly clears any previous contents</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">create_output_panel</span><span class="p">(</span><span class="s1">&#39;exec&#39;</span><span class="p">)</span>

            <span class="c1"># Enable result navigation. The result_file_regex does</span>
            <span class="c1"># the primary matching, but result_line_regex is used</span>
            <span class="c1"># when build output includes some entries that only</span>
            <span class="c1"># contain line/column info beneath a previous line</span>
            <span class="c1"># listing the file info. The result_base_dir sets the</span>
            <span class="c1"># path to resolve relative file names against.</span>
            <span class="n">settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                <span class="s1">&#39;result_file_regex&#39;</span><span class="p">,</span>
                <span class="sa">r</span><span class="s1">&#39;^File &quot;([^&quot;]+)&quot; line (\d+) col (\d+)&#39;</span>
            <span class="p">)</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                <span class="s1">&#39;result_line_regex&#39;</span><span class="p">,</span>
                <span class="sa">r</span><span class="s1">&#39;^\s+line (\d+) col (\d+)&#39;</span>
            <span class="p">)</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;result_base_dir&#39;</span><span class="p">,</span> <span class="n">working_dir</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="s1">&#39;show_panel&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;panel&#39;</span><span class="p">:</span> <span class="s1">&#39;output.exec&#39;</span><span class="p">})</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">proc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">proc</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">proc</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;my_cli&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lint</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;-l&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">integration</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">vars</span><span class="p">[</span><span class="s1">&#39;file_name&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
            <span class="n">args</span><span class="p">,</span>
            <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
            <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">STDOUT</span><span class="p">,</span>
            <span class="n">cwd</span><span class="o">=</span><span class="n">working_dir</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">killed</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span>
            <span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">read_handle</span><span class="p">,</span>
            <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proc</span><span class="o">.</span><span class="n">stdout</span><span class="p">,)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">read_handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">):</span>
        <span class="n">chunk_size</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">13</span>
        <span class="n">out</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="n">chunk_size</span><span class="p">)</span>
                <span class="c1"># If exactly the requested number of bytes was</span>
                <span class="c1"># read, there may be more data, and the current</span>
                <span class="c1"># data may contain part of a multibyte char</span>
                <span class="n">out</span> <span class="o">+=</span> <span class="n">data</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="n">chunk_size</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">out</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;EOF&#39;</span><span class="p">)</span>
                <span class="c1"># We pass out to a function to ensure the</span>
                <span class="c1"># timeout gets the value of out right now,</span>
                <span class="c1"># rather than a future (mutated) version</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">queue_write</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;EOF&#39;</span><span class="p">)</span>
                <span class="n">out</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Error decoding output using </span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="s1">&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">queue_write</span><span class="p">(</span><span class="n">msg</span>  <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">killed</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Cancelled&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Finished&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">queue_write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="n">msg</span><span class="p">)</span>
                <span class="k">break</span>

    <span class="k">def</span> <span class="nf">queue_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="n">sublime</span><span class="o">.</span><span class="n">set_timeout</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_write</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">panel_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="s1">&#39;append&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;characters&#39;</span><span class="p">:</span> <span class="n">text</span><span class="p">})</span>
</pre></div>
</div>
<p>The custom <code class="docutils literal notranslate"><span class="pre">MyExampleBuildCommand</span></code> can be configured as a build system using
the following JSON saved to a file named <span class="file">Packages/User/My Example
Build.sublime-build</span>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my_example_build&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;selector&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;source.mylang&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;cancel&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;kill&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;variants&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Lint&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;lint&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Integration Tests&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;integration&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section></section>

</div>
<aside>
<div id="callout">
    <a href="https://www.sublimemerge.com">
        <span class="subhead">Introducing our Git client</span><br>
        <b><img src="../images/merge_icon.svg" class="icon"> Sublime Merge</b>
        <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" id="merge-screenshot">
    </a>
    <script>
        function show_callout()
        {
            var callout = byid('merge-screenshot')
            callout.src = '/images/merge_callout_' + plat + res() + '.png'
            callout.onload = function()
            {
                callout.style.backgroundColor = 'transparent'
            }
        }
        show_callout()
    </script>
</div>
</aside>
</section>
</main>
<footer>
    <section>
            <div class="footer_start">
                <p>© <a href="https://www.sublimehq.com">Sublime HQ Pty Ltd</a></p>
                <p>Woollahra, Sydney.</p>
            </div>
            <div class="footer_end">
                <p>
                    <div class="twitter_follow">
                        <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/sublimehq?ref_src=twsrc%5Etfw">Follow @sublimehq</a>
                    </div>
                </p>
            </div>
    </section>
</footer>
<!--[if lt IE 9]>
<script>
    var logo_img = byid('logo').getElementsByTagName('IMG')[0]
    logo_img.src = logo_img.src.replace('.svg', '.png')
</script>
<![endif]-->
</body>
</html>