<!DOCTYPE html>
<html>
<head>
    <title>Build Systems – Sublime Text 3 Documentation</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=480, user-scalable=yes">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700,700i|Roboto+Mono:400,700" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../../sublime_v3.css@d=190313.css">
    <link rel="icon" href="https://www.sublimetext.com/favicon.ico">
    <link rel="icon" size="64x64" href="https://www.sublimetext.com/favicon.ico">
    <link rel="icon" sizes="192x192" href="https://www.sublimetext.com/images/icon.png">
    <link rel="apple-touch-icon-precomposed" sizes="192x192" href="https://www.sublimetext.com/images/icon.png">
    <script type="text/javascript">
    var plat = 'windows'
    if (/Mac OS X/.test(navigator.userAgent))
        plat = 'osx'
    else if (/Linux|FreeBSD/.test(navigator.userAgent))
        plat = 'linux'
    var arch = /WOW64|Win64|x86_64/.test(navigator.userAgent) ? '64' : '32'
    document.documentElement.className += ' plat_' + plat + ' arch_' + arch
    function byid(x)
    {
        return document.getElementById(x)
    }
    var scale = 1
    function res()
    {
        scale = window.devicePixelRatio >= 1.3 && document.body.clientWidth > 1024 ? 2 : 1
        return scale == 2 ? '@2x' : ''
    }
    </script>
    <!--[if lt IE 9]>
    <script>
        var els = ['header', 'nav', 'section', 'main', 'article', 'aside', 'footer']
        for (var i = 0; i < els.length; ++i)
            document.createElement(els[i]);
    </script>
    <style>
        header, nav, section, main, article, aside, footer {
            display: block;
        }
    </style>
    <![endif]-->
</head>
<body class="docs">
    <header>
        <section>
            <a id="logo" href="https://www.sublimetext.com/">
                <img src="../../images/logo.svg" alt="Sublime Text">
            </a>
            <nav>
                <a href="https://www.sublimetext.com/3">Download</a>
                <a href="https://www.sublimehq.com/store/text">Buy</a>
                <a href="https://www.sublimetext.com/support">Support</a>
                <span class="vr"></span>
                <a href="https://www.sublimetext.com/blog/">News</a>
                <a href="https://forum.sublimetext.com">Forum</a>
            </nav>
        </section>
    </header>
    <main>
    <section>
    <script src="prism.js"></script>

    <h1><span>
        <a href="index.html">Documentation</a>
        Build Systems
    </span></h1>

    <section>
        <p>
            Sublime Text provides <span class="feature">build systems</span> to
            allow users to run external programs. Examples of common uses for
            build systems include: compiling, transpiling, linting, and
            executing tests.
        </p>

        <p>
            Build systems are specified via JSON and saved in a file with the
            extension <span class="file">.sublime-build</span>. A new build system
            can be created by the <span class="menu">Tools <img src="../../images/right.svg" alt="▶"> Build System <img src="../../images/right.svg" alt="▶"> New Build System…</span> menu item or the <kbd>Build: New Build System</kbd> command
            palette entry.
        </p>

        <p>
            Build systems have various ways they can associate themselves
            with files and projects. Using this information, Sublime Text can
            intelligently display only viable build systems to the user. The
            built-in <code>exec</code> target provides common options to get
            up and running quickly. For more complex requirements, build systems
            can target custom Sublime Text commands written in Python.
        </p>

        <ul>
            <li><a href="build_systems.html#basic_example">Basic Example</a></li>
            <li><a href="build_systems.html#usage">Usage</a></li>
            <li><a href="build_systems.html#options">Options</a></li>
            <li><a href="build_systems.html#exec_options"><code>exec</code> Target Options</a></li>
            <li><a href="build_systems.html#custom_options">Custom Options</a></li>
            <li><a href="build_systems.html#variables">Variables</a></li>
            <li><a href="build_systems.html#advanced_example">Advanced Example</a></li>
        </ul>
    </section>


    <section class="wide">
        <h2 id="basic_example">Basic Example</h2>

        <p>
            The following is a basic example of a build system. This build system
            will execute the currently-open Python file.
        </p>

        <pre><code class="language-js">{
    "cmd": ["python", "$file"],
    "selector": "source.python",
    "file_regex": "^\\s*File \"(...*?)\", line ([0-9]*)"
}</code></pre>

        <p>
            The <a href="build_systems.html#usage">Usage</a> and <a href="build_systems.html#options">Options</a>
            sections will discuss how to use and customize a build system.
        </p>

    </section>

    <section>
        <h2 id="usage">Usage</h2>

        <p>
            Build systems include the following functionality:
        </p>

        <ul>
            <li>Automatic selection of a build system based on file type</li>
            <li>Remembering the last used build system</li>
            <li>Navigation of build system results</li>
            <li>Ability to cancel a build</li>
        </ul>

        <h3 id="running">Running a Build</h3>

        <p>
            A build can be run by one of the following methods:
        </p>

        <table class="controls">
            <thead>
                <tr>
                    <th colspan=3>Keyboard</th>
                    <th>Menu</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th class="platform">Windows/Linux</th>
                    <th class="platform">Mac</th>
                    <th class="platform">All</th>
                    <td rowspan=2 class="menu">
                        <span class="menu">Tools
                        <img src="../../images/right.svg" alt="▶"> Build</span>
                    </td>
                </tr>
                <tr>
                    <td class="keys">
                        <span class="keys"><b>Ctrl</b><i>+</i><b>B</b></span>
                    </td>
                    <td class="keys">
                        <span class="keys"><b>⌘</b><i>+</i><b>B</b></span>
                    </td>
                    <td class="keys">
                        <span class="keys"><b>F7</b></span>
                    </td>
                </tr>
            </tbody>
        </table>

        <p>
            Output will be shown in an output panel displayed at the bottom of
            the Sublime Text window.
        </p>

        <h3 id="selecting">Selecting a Build System</h3>

        <p>
            By default, Sublime Text uses automatic selection of build systems. When
            a user invokes a build, the current file's syntax and filename will be
            used to pick the appropriate build system.
        </p>

        <p>
            If more than one build system matches the current file type,
            the user will be prompted to pick the build system they wish
            to use. Once a build system has been selected, Sublime Text will remember
            it until the user changes their selection.
        </p>

        <p>
            To manually choose a build system, use:
        </p>

        <table class="controls min">
            <thead>
                <tr>
                    <th>Menu</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="menu">
                        <span class="menu">Tools
                        <img src="../../images/right.svg" alt="▶"> Build System</span>
                    </td>
                </tr>
            </tbody>
        </table>

        <p>
            To change the build system, within the viable options, use
            one of the following methods:
        </p>

        <table class="controls">
            <thead>
                <tr>
                    <th colspan=2>Keyboard</th>
                    <th>Menu</th>
                    <th>Command Palette</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th class="platform">Windows/Linux</th>
                    <th class="platform">Mac</th>
                    <td rowspan=2 class="menu">
                        <span class="menu">Tools
                        <img src="../../images/right.svg" alt="▶"> Build With…</span>
                    </td>
                    <td rowspan=2 class="palette">
                        <kbd>Build With:</kbd>
                    </td>
                </tr>
                <tr>
                    <td class="keys">
                        <span class="keys"><b>Ctrl</b><i>+</i><b>Shift</b><i>+</i><b>B</b></span>
                    </td>
                    <td class="keys">
                        <span class="keys"><b>⇧</b><i>+</i><b>⌘</b><i>+</i><b>B</b></span>
                    </td>
                </tr>
            </tbody>
        </table>

        <h3 id="navigation">Navigating Results</h3>

        <p>
            Build systems allow navigation of files specified in the build output.
            Typically this is used to jump to the location of errors. Navigation
            can be performed via:
        </p>

        <table class="controls">
            <thead>
                <tr>
                    <th>Command</th>
                    <th>Keyboard</th>
                    <th>Menu</th>
                </tr>
            </thead>
            <tbody>
                <tr class="command">
                    <th class="command">
                        Next Result
                    </th>
                    <td class="keys">
                        <span class="keys"><b>F4</b></span>
                    </td>
                    <td class="menu">
                        <span class="menu">Tools
                        <img src="../../images/right.svg" alt="▶"> Build Results
                        <img src="../../images/right.svg" alt="▶"> Next Result</span>
                    </td>
                </tr>
                <tr class="command">
                    <th class="command">
                        Previous Result
                    </th>
                    <td class="keys">
                        <span class="keys"><b>Shift</b><i>+</i><b>F4</b></span>
                    </td>
                    <td class="menu">
                        <span class="menu">Tools
                        <img src="../../images/right.svg" alt="▶"> Build Results
                        <img src="../../images/right.svg" alt="▶"> Previous Result</span>
                    </td>
                </tr>
            </tbody>
        </table>

        <h3 id="cancelling">Cancelling a Build</h3>

        <p>
            An in-process build can be cancelled via:
        </p>

        <table class="controls">
            <thead>
                <tr>
                    <th colspan=2>Keyboard</th>
                    <th>Menu</th>
                    <th>Command Palette</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th class="platform">Windows/Linux</th>
                    <th class="platform">Mac</th>
                    <td rowspan=2 class="menu">
                        <span class="menu">Tools
                        <img src="../../images/right.svg" alt="▶"> Cancel Build</span>
                    </td>
                    <td rowspan=2 class="palette">
                        <kbd>Build: Cancel</kbd>
                    </td>
                </tr>
                <tr>
                    <td class="keys">
                        <span class="keys"><b>Ctrl</b><i>+</i><b>Break</b></span>
                    </td>
                    <td class="keys">
                        <span class="keys"><b>Ctrl</b><i>+</i><b>C</b></span>
                    </td>
                </tr>
            </tbody>
        </table>
        
    </section>

    <section>
        <h2 id="options">Options</h2>

        <p>
            All build systems may use the following top-level keys
            in the <span class="file">.sublime-build</span> file.
        </p>

        <dl class="enum settings">
            <dt id="option-selector">selector</dt>
            <dd>
                The base scope name of the syntax that this build system
                should be enabled for.<br>
                <i>
                    Example:
                    <code>"source.python"</code>.
                </i>
            </dd>
            <dt id="option-file_patterns">file_patterns</dt>
            <dd>
                A list of file name patterns the build system should be enabled
                for.<br>
                <i>
                    Example:
                    <code>["*.py"]</code>.
                </i>
            </dd>
            <dt id="option-keyfiles">keyfiles</dt>
            <dd>
                A list of file names, if present in one of the opened folders,
                that will cause the build system to be enabled.<br>
                <i>
                    Example:
                    <code>["Makefile"]</code>.
                </i>
            </dd>
            <dt id="option-variants">variants</dt>
            <dd>
                A list of subsidiary build systems that will inherit the options
                from the top-level build system. Each variant needs to specify a
                <code>name</code> key, and may override or add options to the
                top-level build system.<br>
                <i>
                    Example:<br>
                    <pre><code>[
    {
        "name": "Debug Symbols",
        "cmd": ["my_command", "-D", "$file"]
    }
]
</code></pre>
                </i>
            </dd>
            <dt id="option-cancel">cancel</dt>
            <dd>
                A string command name, or a list of string options. If a string
                is specified, the command specified will be used to cancel the
                build. If a list of strings, the primary <code>target</code> will
                be called, with these options added on. This only needs to be
                specified when using a custom <code>target</code>.<br>
                <i>
                    Example:
                    <code>"cancel_my_build"</code> or
                    <code>{"kill": true}</code>.
                </i>
            </dd>
            <dt id="option-target">target</dt>
            <dd>
                The command to run when the build system is invoked. The default
                value of <span class="command">exec</span> allows use of
                the additional options specified in <a href="build_systems.html#exec_options">exec
                Target Options</a>. If a value other than <code>exec</code> is
                specified, none of the options in <a href="build_systems.html#exec_options">exec
                Target Options</a> will do anything. See the
                <a href="build_systems.html#advanced_example">Advanced Example</a> for a complete
                example.<br>
                <i>
                    Example:
                    <code>"my_build"</code>
                </i>
            </dd>
            <dt id="option-windows">windows</dt>
            <dd>
                An object of options to use when the build system is being executed
                on a Windows machine.<br>
                <i>
                    Example:<br>
                    <pre><code>{
    "cmd": ["my_command.exe", "/D", "$file"]
}
</code></pre>
                </i>
            </dd>
            <dt id="option-osx">osx</dt>
            <dd>
                An object of options to use when the build system is being executed
                on a Mac machine.<br>
                <i>
                    Example:<br>
                    <pre><code>{
    "cmd": ["/Applications/MyProgram.app/Contents/MacOS/my_command", "-d", "$file"]
}
</code></pre>
                </i>
            </dd>
            <dt id="option-linux">linux</dt>
            <dd>
                An object of options to use when the build system is being executed
                on a Linux machine.<br>
                <i>
                    Example:<br>
                    <pre><code>{
    "cmd": ["/usr/local/bin/my_command", "-d", "$file"]
}
</code></pre>
                </i>
            </dd>
        </dl>
    </section>

    <section>
        <h2 id="exec_options"><code>exec</code> Target Options</h2>

        <p>
            The default <code>target</code> of <code>exec</code> is used by the
            majority of build systems. It provides the following options to
            control what program to execute, and how to display the results.
        </p>

        <dl class="enum settings">
            <dt id="exec_option-cmd">cmd</dt>
            <dd>
                A list of strings specifying the executable to run, plus
                any arguments to pass to it. Shell constructs such as piping
                and redirection are not supported – see
                <a href="build_systems.html#exec_option-shell_cmd">shell_cmd</a>. May
                use <a href="build_systems.html#variables">variables</a>.<br>
                <i>
                    Example:
                    <code>["my_command", "-d", "$file"]</code>
                </i>
            </dd>
            <dt id="exec_option-shell_cmd">shell_cmd</dt>
            <dd>
                A string specifying a shell command to execute. Unlike the
                <a href="build_systems.html#exec_option-cmd">cmd</a> option, this does allow
                piping and redirection. Will use <code>bash</code> on Mac
                and Linux machine, and <code>cmd.exe</code> on Windows. May
                use <a href="build_systems.html#variables">variables</a>.<br>
                <i>
                    Example:
                    <code>"my_command \"$file\" | other_command"</code>
                </i>
            </dd>
            <dt id="exec_option-working_dir">working_dir</dt>
            <dd>
                A string specifying the directory to execute the
                <a href="build_systems.html#exec_option-cmd">cmd</a> or
                <a href="build_systems.html#exec_option-shell_cmd">shell_cmd</a> within. May
                use <a href="build_systems.html#variables">variables</a>.<br>
                <i>
                    Example:
                    <code>"$file_path"</code>
                </i>
            </dd>
            <dt id="exec_option-file_regex">file_regex</dt>
            <dd>
                A string containing a regular expression to run on the build
                output to match file information. The matched file information
                is used to enable result navigation. The regex should capture
                2, 3 or 4 groups.<br>
                <br>
                The capture groups should be:
                <ol>
                    <li>filename</li>
                    <li>line number</li>
                    <li>column number</li>
                    <li>message</li>
                </ol>
                <i>
                    Example:
                    <code>"^\s*(\\S[^:]*)\\((\\d+):(\\d+)\\): ([^\\n]+)"</code>
                </i>
            </dd>
            <dt id="exec_option-line_regex">line_regex</dt>
            <dd>
                A string containing a regular expression to run on the build
                output to match line information. The matched file information
                is used to enable result navigation. The regex should capture
                1, 2 or 3 groups.<br>
                <br>
                The groups should capture:
                <ol>
                    <li>line number</li>
                    <li>column number</li>
                    <li>error message</li>
                </ol>
                This regular expression is only necessary when some results contain
                strictly a line number, line and column numbers, or line and column
                numbers with a message. When such a match is made, the
                <a href="build_systems.html#exec_option-file_regex">file_regex</a> option will be used
                to search backwards to find the appropriate file name.
                <br>
                <br>
                <i>
                    Example:
                    <code>"^\s*line (\\d+) col (\\d+): ([^\\n]+)"</code>
                </i>
            </dd>
            <dt id="exec_option-encoding">encoding</dt>
            <dd>
                A string specifying the encoding of the build system output. Uses
                <a href="https://docs.python.org/3.3/library/codecs.html#id3">Python
                codec names</a>. Defaults to <code>"utf-8"</code>.<br>
                <i>
                    Example:
                    <code>"iso-8859-1"</code>
                </i>
            </dd>
            <dt id="exec_option-env">env</dt>
            <dd>
                An object containing environment variable values to use when
                running the <a href="build_systems.html#exec_option-cmd">cmd</a> or
                <a href="build_systems.html#exec_option-shell_cmd">shell_cmd</a>.<br>
                <i>
                    Example:
                    <pre>{
    "PYTHONIOENCODING": "utf-8"
}
</pre>
                </i>
            </dd>
            <dt id="exec_option-quiet">quiet</dt>
            <dd>
                A boolean that reduces the amount of output about the build system
                invocation.<br>
                <i>
                    Example:
                    <code>true</code>
                </i>
            </dd>
            <dt id="exec_option-word_wrap">word_wrap</dt>
            <dd>
                A boolean that turns on word wrapping in the build system output panel.<br>
                <i>
                    Example:
                    <code>true</code>
                </i>
            </dd>
            <dt id="exec_option-syntax">syntax</dt>
            <dd>
                A string specifying the syntax file to use to highlight the build
                system output panel.<br>
                <i>
                    Example:
                    <code>"Packages/JavaScript/JSON.sublime-syntax"</code>
                </i>
            </dd>
        </dl>
    </section>

    <section>
        <h2 id="custom_options">Custom Options</h2>

        <p>
            When implementing a command to act as a build system target,
            the command's keyword arguments are available via options
            in the <span class="file">.sublime-build</span> file. However,
            certain parameter names will not work since they conflict
            with built-in build system functionality.
        </p>

        <p>
            The following names will not be passed as arguments to
            commands. This also applies to other situations, such as
            options specified in the <code>cancel</code>,
            <code>linux</code>, <code>osx</code> and
            <code>windows</code> options.
        </p>

        <ul>
            <li><code>cancel</code></li>
            <li><code>file_patterns</code></li>
            <li><code>keyfile</code></li>
            <li><code>keyfiles</code></li>
            <li><code>linux</code></li>
            <li><code>osx</code></li>
            <li><code>save_untitled_files</code></li>
            <li><code>selector</code></li>
            <li><code>target</code></li>
            <li><code>variants</code></li>
            <li><code>windows</code></li>
        </ul>
    </section>

    <section>
        <h2 id="variables">Variables</h2>

        <p>
            The following variables will be expanded within any string specified
            in the <code>"cmd"</code>, <code>"shell_cmd"</code> or
            <code>"working_dir"</code> options.
        </p>

        <p>
            If a literal <code>$</code> needs to be specified in one of these
            options, it must be escaped with a <code>\</code>. Since JSON
            uses backslashes for escaping also, <code>$</code> will need to
            be written as <code>\\$</code>.
        </p>

        <p>
            Please note that this substitution
            will occur for any <code>target</code>. If a custom target is used,
            it may implement variable expansion for additional options by using
            <code>sublime.expand_variables()</code> with the result from
            <code>self.window.extract_variables()</code>.
        </p>

        <dl class="enum settings">
            <dt id="variable-packages">$packages</dt>
            <dd>
                The path to the <span class="file">Packages/</span> folder
            </dd>
            <dt id="variable-platform">$platform</dt>
            <dd>
                A string containing the platform Sublime Text is running on:
                <code>windows</code>, <code>osx</code> or <code>linux</code>.
            </dd>
            <dt id="variable-file">$file</dt>
            <dd>
                The full path, including folder, to the file in the active
                view.
            </dd>
            <dt id="variable-file_path">$file_path</dt>
            <dd>
                The path to the folder that contains the file in the active
                view.
            </dd>
            <dt id="variable-file_name">$file_name</dt>
            <dd>
                The file name (sans folder path) of the file in the
                active view.
            </dd>
            <dt id="variable-file_base_name">$file_base_name</dt>
            <dd>
                The file name, exluding the extension, of the file in the
                active view.
            </dd>
            <dt id="variable-file_extension">$file_extension</dt>
            <dd>
                The extension of the file name of the file in the
                active view.
            </dd>
            <dt id="variable-folder">$folder</dt>
            <dd>
                The full path to the first folder open in the side bar.
            </dd>
            <dt id="variable-project">$project</dt>
            <dd>
                The full path to the current project file.
            </dd>
            <dt id="variable-project_path">$project_path</dt>
            <dd>
                The path to the folder containing the current project file.
            </dd>
            <dt id="variable-project_name">$project_name</dt>
            <dd>
                The file name (sans folder path) of the current project
                file.
            </dd>
            <dt id="variable-project_base_name">$project_base_name</dt>
            <dd>
                The file name, excluding the extension, of the current
                project file.
            </dd>
            <dt id="variable-project_extension">$project_extension</dt>
            <dd>
                The extension of the current project file.
            </dd>
        </dl>

    </section>

    <section>
        <h2 id="advanced_example">Advanced Example</h2>

        <p>
            The following example shows a custom <code>target</code> command,
            with the ability to cancel a build and navigate results.
        </p>

        <p>
            A <code>target</code> for a build system should be a
            <a href="api_reference.html#sublime_plugin.WindowCommand"><code>sublime.WindowCommand</code></a>.
            This will provide the instance variable of <code>self.window</code>
            to allow interaction with the current project, window and active view.
        </p>

        <p>
            <em>Please note that the following example is somewhat
            simplistic in its implementation, and it won't handle
            many common edge cases.</em>
        </p>

        <p>
            The following Python can be saved to a file named
            <span class="file">Package/User/my_example_build.py</span>:
        </p>

        <pre><code class="language-python">import sublime
import sublime_plugin

import subprocess
import threading
import os


class MyExampleBuildCommand(sublime_plugin.WindowCommand):

    encoding = 'utf-8'
    killed = False
    proc = None
    panel = None
    panel_lock = threading.Lock()

    def is_enabled(self, lint=False, integration=False, kill=False):
        # The Cancel build option should only be available
        # when the process is still running
        if kill:
            return self.proc is not None and self.proc.poll() is None
        return True

    def run(self, lint=False, integration=False, kill=False):
        if kill:
            if self.proc:
                self.killed = True
                self.proc.terminate()
            return

        vars = self.window.extract_variables()
        working_dir = vars['file_path']

        # A lock is used to ensure only one thread is
        # touching the output panel at a time
        with self.panel_lock:
            # Creating the panel implicitly clears any previous contents
            self.panel = self.window.create_output_panel('exec')

            # Enable result navigation. The result_file_regex does
            # the primary matching, but result_line_regex is used
            # when build output includes some entries that only
            # contain line/column info beneath a previous line
            # listing the file info. The result_base_dir sets the
            # path to resolve relative file names against.
            settings = self.panel.settings()
            settings.set(
                'result_file_regex',
                r'^File "([^"]+)" line (\d+) col (\d+)'
            )
            settings.set(
                'result_line_regex',
                r'^\s+line (\d+) col (\d+)'
            )
            settings.set('result_base_dir', working_dir)

            self.window.run_command('show_panel', {'panel': 'output.exec'})

        if self.proc is not None:
            self.proc.terminate()
            self.proc = None

        args = ['my_cli']
        if lint:
            args.append('-l')
        elif integration:
            args.append('-i')
        args.append(vars['file_name'])
        self.proc = subprocess.Popen(
            args,
            stdout=subprocess.PIPE,
            stderr=subprocess.STDOUT,
            cwd=working_dir
        )
        self.killed = False

        threading.Thread(
            target=self.read_handle,
            args=(self.proc.stdout,)
        ).start()

    def read_handle(self, handle):
        chunk_size = 2 ** 13
        out = b''
        while True:
            try:
                data = os.read(handle.fileno(), chunk_size)
                # If exactly the requested number of bytes was
                # read, there may be more data, and the current
                # data may contain part of a multibyte char
                out += data
                if len(data) == chunk_size:
                    continue
                if data == b'' and out == b'':
                    raise IOError('EOF')
                # We pass out to a function to ensure the
                # timeout gets the value of out right now,
                # rather than a future (mutated) version
                self.queue_write(out.decode(self.encoding))
                if data == b'':
                    raise IOError('EOF')
                out = b''
            except (UnicodeDecodeError) as e:
                msg = 'Error decoding output using %s - %s'
                self.queue_write(msg  % (self.encoding, str(e)))
                break
            except (IOError):
                if self.killed:
                    msg = 'Cancelled'
                else:
                    msg = 'Finished'
                self.queue_write('\n[%s]' % msg)
                break

    def queue_write(self, text):
        sublime.set_timeout(lambda: self.do_write(text), 1)

    def do_write(self, text):
        with self.panel_lock:
            self.panel.run_command('append', {'characters': text})
</code></pre>

        <p>
            The custom <code>MyExampleBuildCommand</code> can be
            configured as a build system using the following JSON
            saved to a file named
            <span class="file">Packages/User/My Example Build.sublime-build</span>:
        </p>

        <pre><code class="language-js">{
    "target": "my_example_build",
    "selector": "source.mylang",
    "cancel": {"kill": true},
    "variants": [
        {
            "name": "Lint",
            "lint": true
        },
        {
            "name": "Integration Tests",
            "integration": true
        }
    ]
}</code></pre>

    </section>

    </section>
    </main>
    <footer>
        <section>
            © <a href="https://www.sublimehq.com">Sublime HQ Pty Ltd</a>

            <p>Woollahra, Sydney.
        </section>
    </footer>
    <!--[if lt IE 9]>
    <script>
        var logo_img = byid('logo').getElementsByTagName('IMG')[0]
        logo_img.src = logo_img.src.replace('.svg', '.png')
    </script>
    <![endif]-->
</body>
</html>